---
import { Icon } from 'astro-icon';

const recenzii = [
	{
		titlu: 'Serviciu exceptional',
		recenzie:
			'Lorem, ipsum dolor sit amet consectetur adipisicing elit. Ab numquam consequatur sit perferendis sapiente consectetur pariatur. Maxime odit facere nesciunt asperiores, nulla nostrum natus. Placeat adipisci accusamus similique suscipit dolore.',
		nume: 'Izabela Hrean',
	},
	{
		titlu: 'Fantastic nu imi vine a crede',
		recenzie: 'Trolollol. Placeat adipisci accusamus similique suscipit dolore.',
		nume: 'Patrunjica Fericita',
	},
	{
		titlu: '3',
		recenzie: 'Maxime odit facere nesciunt asperiores, nulla nostrum natus. Placeat adipisci accusamus similique suscipit dolore',
		nume: 'Lebada Tumultoasa',
	},
];
---

<link href="https://cdn.jsdelivr.net/npm/keen-slider@6.8.6/keen-slider.min.css" rel="stylesheet" />

<section>
	<div class="my-24 container">
		<div class="grid grid-cols-1 gap-8 lg:grid-cols-3 lg:items-center lg:gap-16">
			<div class="max-w-sm text-left">
				<p class="text-[15px] tracking-subtitle text-accent font-bold">Recenzii</p>

				<h2 class="text-gri-text h2-clamp font-bold tracking-h3title leading-tight">Părerile clienților noștri</h2>
				<p class="text-gray-500 font-normal text-base mt-3">
					Suntem foarte mândri să oferim servicii excepționale care transformă cu adevărat spațiile de locuit ale clienților noștri. Dar nu ne credeți doar pe
					cuvânt, citiți ce spun clienții noștri.
				</p>

				<!-- ? Butoane large screen -->
				<div class="hidden lg:mt-8 lg:flex lg:gap-4">
					<button aria-label="Previous slide" id="keen-slider-previous-desktop" class="py-4 px-9 rounded-[.625rem] bg-blue-400 hover:bg-blue-500 text-white">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							width="24"
							height="24"
							viewBox="0 0 24 24"
							fill="none"
							stroke="currentColor"
							stroke-width="2"
							stroke-linecap="round"
							stroke-linejoin="round"
							class="lucide lucide-move-left"><path d="M6 8L2 12L6 16"></path><path d="M2 12H22"></path></svg
						>
					</button>

					<button aria-label="Next slide" id="keen-slider-next-desktop" class="py-4 px-9 rounded-[.625rem] bg-blue-400 hover:bg-blue-500 text-white">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							width="24"
							height="24"
							viewBox="0 0 24 24"
							fill="none"
							stroke="currentColor"
							stroke-width="2"
							stroke-linecap="round"
							stroke-linejoin="round"
							class="lucide lucide-move-right"><path d="M18 8L22 12L18 16"></path><path d="M2 12H22"></path></svg
						>
					</button>
				</div>
			</div>

			<!-- ? Slider -->
			<div class="-mx-6 lg:col-span-2 lg:mx-0 lg:text-center">
				<div id="keen-slider" class="keen-slider">
					{
						recenzii.map((recenzie, index) => (
							<div class="keen-slider__slide">
								<blockquote class="flex h-full flex-col justify-between bg-blue-50 px-24 py-20 rounded-lg relative">
									<div>
										<div class="mt-4">
											<p class="text-2xl font-bold text-rose-600 sm:text-3xl">{recenzie.titlu}</p>
											<p class="mt-4 leading-relaxed text-gray-700">{recenzie.recenzie}</p>
										</div>
									</div>

									<footer class="mt-4 text-sm font-medium text-gray-700 sm:mt-6">&mdash; {recenzie.nume}</footer>
								</blockquote>
							</div>
						))
					}
				</div>
			</div>
		</div>

		<!-- ? Butoane small device -->

		<div class="mt-8 flex justify-center gap-4 lg:hidden">
			<button
				aria-label="Previous slide"
				id="keen-slider-previous"
				class="rounded-full border border-rose-600 p-4 text-rose-600 transition hover:bg-rose-600 hover:text-white"
			>
				<svg class="h-5 w-5 -rotate-180 transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
					<path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
				</svg>
			</button>

			<button
				aria-label="Next slide"
				id="keen-slider-next"
				class="rounded-full border border-rose-600 p-4 text-rose-600 transition hover:bg-rose-600 hover:text-white"
			>
				<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
					<path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
				</svg>
			</button>
		</div>
	</div>
</section>

<script type="module">
	//@ts-ignore
	import KeenSlider from 'https://cdn.jsdelivr.net/npm/keen-slider@6.8.6/+esm';

	const keenSlider = new KeenSlider(
		'#keen-slider',
		{
			loop: true,
			slides: {
				origin: 'center',
				perView: 1,
			},
			breakpoints: {
				'(min-width: 1024px)': {
					slides: {
						origin: 'auto',
						perView: 1,
					},
				},
			},
		},
		[]
	);

	const keenSliderPrevious = document.getElementById('keen-slider-previous');
	const keenSliderNext = document.getElementById('keen-slider-next');

	const keenSliderPreviousDesktop = document.getElementById('keen-slider-previous-desktop');
	const keenSliderNextDesktop = document.getElementById('keen-slider-next-desktop');

	keenSliderPrevious.addEventListener('click', () => keenSlider.prev());
	keenSliderNext.addEventListener('click', () => keenSlider.next());

	keenSliderPreviousDesktop.addEventListener('click', () => keenSlider.prev());
	keenSliderNextDesktop.addEventListener('click', () => keenSlider.next());
</script>
